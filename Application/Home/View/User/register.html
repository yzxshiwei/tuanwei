<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>个人报名</title>
    <link rel="stylesheet" href="__STATIC__/css/reset.css">
    <link rel="stylesheet" href="__STATIC__/css/style-fcl.css">
    <link rel="stylesheet" href="__STATIC__/css/mobiscroll.custom-2.5.2.min.css"/>
    <link href="__STATIC__/css/mobiscroll.android-ics-2.5.2.css" rel="stylesheet" type="text/css" />
</head>
<body>
<include file='Public:headerhtml'/>
<!--poster-->
<div id="team">
    <div class="poster">
        <div class="center"><img src="__STATIC__/img/banner-1.jpg"/></div>
    </div>
    <!--title-->
    <div class="title">个人注册</div>
    <!--content-->
    <div class="content">
        <form action="{{:U('User/register')}}" method="post">
            <!--
                <div id="teamRegister">
                    <p class="teamName"><span>团队名称</span><input type="text" id="teamName" placeholder="团队名称（必填）"/></p>
                    <input type="hidden"/>
                    <label id="teamNameTs">123</label>
                    <h4>负责人注册</h4>
                </div>
                -->
            <p><span>电子邮箱</span><input id="email" class="required" type="text" name="email" placeholder="电子邮件地址（必填）"/></p>
            <p class="zjType">
                <span>证件类型</span>
                <select name="card_type" id="idType">
                    <option value="1">学生证</option>
                    <option value="2">身份证</option>
                </select>
                <input id="idNum" class="required" name="card_id" type="text" placeholder="证件号（必填）"/>
            </p>
            <p class="sfAttribute">
                <span>身份属性</span>
                <select name="user_type" class="sc" id="Identity">
                    <option value="6">学生个人</option>
                    <option value="3">指导老师</option>
                    <option value="4">评审专家</option>
                    <option value="5">投资人</option>
                </select>
                <button>性&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;别</button>
                <select name="sex" class="sex">
                    <option value="2">女</option>
                    <option value="1">男</option>
                </select>
            </p>
            <p>
                <span>密码设置</span><input id="pwd" class="required" name="passwd" type="password" placeholder="密码（必填）"/>
            </p>
            <p class="pwdAgain">
                <span>密码确认</span><input type="password" class="required" id="pwdAgain" placeholder="再次输入密码（必填）"/>
            </p>
            <p>
                <span>专 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;业</span><input type="text" id="school" name="college" placeholder="专业"/>
            </p>
            <p>
                <span>姓 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;名</span><input type="text" name="user_name" id="name" placeholder="您的真实姓名"/>
            </p>
            <p class="birthDate">
                <span>民 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;族</span><input id="nation" name="nation" type="text" placeholder="您所属民族" class="mz"/><span class="birth">出生日期</span><input type="text" name="birth" id="appDate" placeholder="你的出生日期"/>
            </p>
            <p><span>学院/机构</span>
                <select name="major" id="major" style="width: 525px;position: relative;right:5px;">
                    <foreach name="major" key="key" item="vo">
                        <option value="{{$key}}">{{$vo}}</option>
                    </foreach>
                </select>
            </p>
            <p><span>学 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;历</span><select name="degree" id="degree" style="width: 530px;"><foreach name="degree" key="key" item="vo"><option value="{{$key}}">{{$vo}}</option></foreach></select></p>
            <input id="register" class="subBtn" type="submit" value="提交"/>
        </form>
    </div>
</div>
<!--footer-->
<div id="footer" style="clear: both">
    <div id="f_center">

    </div>
</div>

</body>
<include file='Public:header'/>
<include file='Public:footer'/>

<script>
    $(function(){
        $('.newsnav li').mouseenter(function(){
            $(this).find($('.dropNav')).slideDown(200);
            $(this).find($('.dropNav')).parent().siblings().find($('ul')).slideUp(200);
        });
        $('.dropNav').mouseleave(function(){
            $(this).slideUp(200);
        });
        $('#Identity').change(function(){
            var value=$("#Identity").find("option:selected").val();

            if(value == "chief"){
                $('#teamRegister').show(300);
                $('.title').html('团队注册')
            }else{
                $('#teamRegister').hide(300);
                $('.title').html('个人注册')
            }
        });
    });
</script>
<script>
    //文本框失去焦点后
    $('form input').blur(function(){
        //身份证的正则表达式
        var idReg = /\d{6,17}[\d|x]|\d{15}/;
        var $parent = $(this).parent();
        $parent.find(".formtips").remove();
        //验证邮件
        if($(this).is('#email') ){
            if( this.value=="" || ( this.value!="" && !/.+@.+\.[a-zA-Z]{2,4}$/.test(this.value) ) ){
                var errorMsg = '请输入正确的E-Mail地址!';
                $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
            }else{
                var okMsg = 'OK';
                $parent.append('<label style="color: #999" class="formtips onSuccess">'+okMsg+'</label>');
            }
        }
        //验证证件
        if($(this).is('#idNum') ){
            if($('#idType').val() == "学生证"  ){
                if($(this).val().length == 0){
                    var errorMsg = '证件号不能为空!';
                    $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
                }else{
                    var okMsg = 'OK';
                    $parent.append('<label style="color: #999" class="formtips onSuccess">'+okMsg+'</label>');
                }
            }else{
                if($(this).val().length == 0){
                    var errorMsg = '证件号不能为空!';
                    $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
                }else if(!idReg.test($(this).val())){
                    var errorMsg = '证件格式不正确!';
                    $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
                }else{
                    var okMsg = 'OK';
                    $parent.append('<label style="color: #999" class="formtips onSuccess">'+okMsg+'</label>');
                }
            }
        }
        //验证密码
        if( $(this).is('#pwd') ){
            if( this.value=="" || this.value.length < 6 ){
                var errorMsg = '请输入至少6位的密码!';
                $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
            }else{
                var okMsg = 'OK';
                $parent.append('<label style="color: #999"  class="formtips onSuccess">'+okMsg+'</label>');
            }
        }
        //二次密码
        if( $(this).is('#pwdAgain') ){
            if( this.value=="" || this.value.length < 6 ){
                var errorMsg = '请输入至少6位的密码!';
                $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
            }else if($(this).val() != $('#pwd').val()){
                var errorMsg = '确认密码与密码输入不一致，请重新输入';
                $parent.append('<label class="formtips onError">'+errorMsg+'</label>');
            }else{
                var okMsg = 'OK';
                $parent.append('<label style="color: #999"  class="formtips onSuccess">'+okMsg+'</label>');
            }
        }
    });
    //提交，最终验证。
    $('#register').click(function(){
        $("form :input.required").trigger('blur');
        var numError = $('form .onError').length;
        if(numError){
            return false;
        }
    });
</script>
<!--出生日期选择-->

<script type="text/javascript">
    $(function () {
        var currYear = (new Date()).getFullYear();
        var opt={};
        opt.date = {preset : 'date'};
        opt.default = {
            theme: 'android-ics light', //皮肤样式
            display: 'modal', //显示方式
            mode: 'scroller', //日期选择模式
            lang:'zh',
            startYear:currYear - 500, //开始年份
            endYear:currYear + 500 //结束年份
        };

        $("#appDate").val('').scroller('destroy').scroller($.extend(opt['date'], opt['default']));

    });
</script>

</html>